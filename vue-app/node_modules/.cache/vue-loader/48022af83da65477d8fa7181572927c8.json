{"remainingRequest":"E:\\project\\jy-movie-project\\jy-movie\\vue-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project\\jy-movie-project\\jy-movie\\vue-app\\src\\views\\Leaving.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\project\\jy-movie-project\\jy-movie\\vue-app\\src\\views\\Leaving.vue","mtime":1711425196254},{"path":"E:\\project\\jy-movie-project\\jy-movie\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711422138956},{"path":"E:\\project\\jy-movie-project\\jy-movie\\vue-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1711422143549}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBmaW5kQnlJZCB9IGZyb20gIkAvYXBpL3VzZXIiOw0KaW1wb3J0IHsNCiAgQ3JlYXRlRXZhbHVhdGUsDQogIENyZWF0ZUxlYXZpbmdNZXNzYWdlLA0KICBMaXN0QWxsTGVhdmluZ01lc3NhZ2UsDQogIExpc3RBbGxXb3JrZXIsDQogIExpc3RXb3JrZXJFdmFsdWF0ZQ0KfSBmcm9tICJAL2FwaS9sZWF2aW5nIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlzTG9naW46IGZhbHNlLA0KICAgICAgZXZhbHVhdGU6IHsNCiAgICAgICAgd2lkOiAnJywNCiAgICAgICAgdWlkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidWlkIiksDQogICAgICAgIHR5cGU6ICfpnZ7luLjmu6HmhI8nLA0KICAgICAgICBjb250ZW50OiAnJywNCiAgICAgIH0sDQogICAgICBldmFsdWF0ZUxpc3Q6IFtdLA0KICAgICAgd29ya2VyTGlzdDogW10sDQogICAgICBsZWF2aW5nTWVzc2FnZUxpc3Q6IFtdLA0KICAgICAgbGVhdmluZ01lc3NhZ2U6IHsNCiAgICAgICAgdWlkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidWlkIiksDQogICAgICAgIHJlcGx5OiAnbnVsbCcsDQogICAgICAgIGNvbnRlbnQ6ICcnLA0KICAgICAgICBjcmVhdGVBdDogJycsDQogICAgICB9LA0KICAgICAgZGlhbG9nRm9ybVZpc2libGUxOiBmYWxzZSwNCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlMjogZmFsc2UsDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZTM6IGZhbHNlLA0KICAgIH0NCiAgfSwNCg0KICBtb3VudGVkKCkgew0KICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidWlkIikpIHsNCiAgICAgIHRoaXMuaXNMb2dpbiA9IHRydWUNCiAgICB9DQogICAgTGlzdEFsbExlYXZpbmdNZXNzYWdlKCkudGhlbihyZXMgPT4gew0KICAgICAgdGhpcy5sZWF2aW5nTWVzc2FnZUxpc3QgPSByZXMuZGF0YQ0KICAgIH0pDQogICAgTGlzdEFsbFdvcmtlcigpLnRoZW4ocmVzID0+IHsNCiAgICAgIHRoaXMud29ya2VyTGlzdCA9IHJlcy5kYXRhDQogICAgfSkNCiAgfSwNCg0KICBtZXRob2RzOiB7DQoNCiAgICBoYW5kbGVMaXN0RXZhbHVhdGUoaXRlbSkgew0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZTMgPSB0cnVlDQogICAgICBMaXN0V29ya2VyRXZhbHVhdGUoaXRlbS5pZCkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmV2YWx1YXRlTGlzdCA9IHJlcy5kYXRhDQogICAgICB9KQ0KICAgIH0sDQoNCiAgICBoYW5kbGVFdmFsdWF0ZShpdGVtKSB7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlMSA9IHRydWUNCiAgICAgIHRoaXMuZXZhbHVhdGUud2lkID0gaXRlbS5pZA0KICAgIH0sDQoNCiAgICBoYW5kbGVMZWF2aW5nKCkgew0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZTIgPSB0cnVlDQogICAgfSwNCg0KICAgIHN1Ym1pdEV2YWx1YXRlKCkgew0KICAgICAgQ3JlYXRlRXZhbHVhdGUodGhpcy5ldmFsdWF0ZSkudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlMSA9IGZhbHNlDQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAn5oSf6LCi5oKo5a+55bel5L2c5Lq65ZGY5L2c5Ye655qE6K+E5Lu3JywNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQoNCiAgICBzdWJtaXRMZWF2aW5nKCkgew0KICAgICAgQ3JlYXRlTGVhdmluZ01lc3NhZ2UodGhpcy5sZWF2aW5nTWVzc2FnZSkudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlMiA9IGZhbHNlDQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAn5oSf6LCi5oKo5a+55bCP5bCP55S15b2x55WZ5LiL55qE5a6d6LS15oSP6KeBJywNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQoNCiAgfSwNCg0KfQ0K"},{"version":3,"sources":["Leaving.vue"],"names":[],"mappings":";AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Leaving.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"main\">\r\n\r\n    <el-container>\r\n\r\n      <el-aside width=\"400px\">\r\n        <h1 style=\"color: #FFFFFF;padding-bottom: 40px;letter-spacing: 1px\">客服人员</h1>\r\n        <div class=\"item\" v-for=\"(item, index) in workerList\" :key=\"index\">\r\n          <img class=\"av\" alt=\"\" :src=\"item.avatar\">\r\n          <div>\r\n            <div class=\"d1\">名字: {{ item.nickname }}</div>\r\n            <div class=\"d1\">性别: {{ item.gender }}</div>\r\n            <div class=\"d1\">ID: {{ item.id }}</div>\r\n            <div>\r\n              <el-button @click=\"handleListEvaluate(item)\" type=\"text\">我的评价\r\n              </el-button>\r\n              <el-button style=\"padding-left: 40px\" :disabled=\"!isLogin\" @click=\"handleEvaluate(item)\" type=\"text\">评价客服\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-aside>\r\n\r\n      <el-main>\r\n        <h1 style=\"color: #FFFFFF;padding-bottom: 40px;letter-spacing: 1px\">影院留言</h1>\r\n        <div class=\"item2\" v-for=\"(item, index) in leavingMessageList\" :key=\"index\">\r\n          <div style=\"display: flex\">\r\n            <img class=\"av2\" :src=\"item.user.avatar\" alt=\"null\">\r\n            <div>\r\n              <div class=\"d2\">{{ item.user.nickname }}</div>\r\n              <div v-if=\"!item.user.nickname\" class=\"d2\">匿名用户</div>\r\n              <div class=\"d3\">{{ item.leavingMessage.content }}</div>\r\n              <div class=\"d2\">Time: {{ item.leavingMessage.createAt }}</div>\r\n            </div>\r\n          </div>\r\n          <div v-if=\"item.leavingMessage.reply\" class=\"reply\">\r\n            <div class=\"d2\">客服回复:</div>\r\n            <div class=\"d3\">{{ item.leavingMessage.reply }}</div>\r\n          </div>\r\n        </div>\r\n        <el-button :disabled=\"!isLogin\" @click=\"handleLeaving\" class=\"btn\" type=\"success\" icon=\"el-icon-share\">\r\n          添加留言\r\n        </el-button>\r\n      </el-main>\r\n    </el-container>\r\n\r\n    <el-dialog title=\"客服评价\" :visible.sync=\"dialogFormVisible1\">\r\n      <el-form :model=\"evaluate\">\r\n        <el-form-item label=\"满意程度\" label-width=\"120px\">\r\n          <el-select v-model=\"evaluate.type\" placeholder=\"请选择满意程度\">\r\n            <el-option label=\"满意\" value=\"满意\"></el-option>\r\n            <el-option label=\"不满意\" value=\"不满意\"></el-option>\r\n            <el-option label=\"非常满意\" value=\"非常满意\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item style=\"width: 100%\" label=\"评价内容\" label-width=\"120px\">\r\n          <el-input type=\"textarea\" :rows=\"8\" v-model=\"evaluate.content\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible1 = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitEvaluate\">提 交 评 价</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"添加留言\" :visible.sync=\"dialogFormVisible2\">\r\n      <el-input type=\"textarea\" :rows=\"8\" v-model=\"leavingMessage.content\" autocomplete=\"off\"></el-input>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible2 = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitLeaving\">提 交 留 言</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"我的评价\" :visible.sync=\"dialogFormVisible3\">\r\n      <el-table :data=\"evaluateList\">\r\n        <el-table-column property=\"createAt\" label=\"日期\" width=\"250\"></el-table-column>\r\n        <el-table-column property=\"content\" label=\"评语\"></el-table-column>\r\n        <el-table-column property=\"type\" width=\"150\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag v-if=\"scope.row.type === '非常满意'\" type=\"success\">非常满意</el-tag>\r\n            <el-tag v-if=\"scope.row.type === '满意'\" type=\"info\">满意</el-tag>\r\n            <el-tag v-if=\"scope.row.type === '不满意'\" type=\"danger\">不满意</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { findById } from \"@/api/user\";\r\nimport {\r\n  CreateEvaluate,\r\n  CreateLeavingMessage,\r\n  ListAllLeavingMessage,\r\n  ListAllWorker,\r\n  ListWorkerEvaluate\r\n} from \"@/api/leaving\";\r\n\r\nexport default {\r\n\r\n  data() {\r\n    return {\r\n      isLogin: false,\r\n      evaluate: {\r\n        wid: '',\r\n        uid: localStorage.getItem(\"uid\"),\r\n        type: '非常满意',\r\n        content: '',\r\n      },\r\n      evaluateList: [],\r\n      workerList: [],\r\n      leavingMessageList: [],\r\n      leavingMessage: {\r\n        uid: localStorage.getItem(\"uid\"),\r\n        reply: 'null',\r\n        content: '',\r\n        createAt: '',\r\n      },\r\n      dialogFormVisible1: false,\r\n      dialogFormVisible2: false,\r\n      dialogFormVisible3: false,\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    if (localStorage.getItem(\"uid\")) {\r\n      this.isLogin = true\r\n    }\r\n    ListAllLeavingMessage().then(res => {\r\n      this.leavingMessageList = res.data\r\n    })\r\n    ListAllWorker().then(res => {\r\n      this.workerList = res.data\r\n    })\r\n  },\r\n\r\n  methods: {\r\n\r\n    handleListEvaluate(item) {\r\n      this.dialogFormVisible3 = true\r\n      ListWorkerEvaluate(item.id).then(res => {\r\n        this.evaluateList = res.data\r\n      })\r\n    },\r\n\r\n    handleEvaluate(item) {\r\n      this.dialogFormVisible1 = true\r\n      this.evaluate.wid = item.id\r\n    },\r\n\r\n    handleLeaving() {\r\n      this.dialogFormVisible2 = true\r\n    },\r\n\r\n    submitEvaluate() {\r\n      CreateEvaluate(this.evaluate).then(res => {\r\n        if (res.success) {\r\n          this.dialogFormVisible1 = false\r\n          this.$message({\r\n            message: '感谢您对工作人员作出的评价',\r\n            type: 'success'\r\n          });\r\n        }\r\n      })\r\n    },\r\n\r\n    submitLeaving() {\r\n      CreateLeavingMessage(this.leavingMessage).then(res => {\r\n        if (res.success) {\r\n          this.dialogFormVisible2 = false\r\n          this.$message({\r\n            message: '感谢您对小小电影留下的宝贵意见',\r\n            type: 'success'\r\n          });\r\n        }\r\n      })\r\n    },\r\n\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.main {\r\n  color: #FFFFFF;\r\n  padding: 40px;\r\n}\r\n\r\n.el-aside {\r\n  background-color: #242930;\r\n  color: #333;\r\n  padding: 10px 50px 40px;\r\n  min-height: 500px;\r\n}\r\n\r\n.el-main {\r\n  background-color: #353b43;\r\n  color: #333;\r\n  padding: 10px 70px 50px;\r\n  min-height: 500px;\r\n}\r\n\r\n.item {\r\n  margin-bottom: 40px;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px dashed rgba(255, 255, 255, .3);\r\n}\r\n\r\n.item2 {\r\n  padding-bottom: 60px;\r\n}\r\n\r\n.av {\r\n  width: 76px;\r\n  height: 76px;\r\n  border-radius: 38px;\r\n  margin-right: 20px;\r\n  float: left;\r\n}\r\n\r\n.av2 {\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 30px;\r\n  margin-right: 20px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.d1 {\r\n  letter-spacing: 2px;\r\n  line-height: 30px;\r\n  color: #afbac4;\r\n  font-size: 14px;\r\n}\r\n\r\n.d2 {\r\n  color: #afbac4;\r\n  letter-spacing: 2px;\r\n  font-size: 14px;\r\n  line-height: 30px;\r\n}\r\n\r\n.d3 {\r\n  letter-spacing: 2px;\r\n  font-size: 15px;\r\n  font-weight: 400;\r\n  line-height: 30px;\r\n  color: #FFFFFF;\r\n}\r\n\r\n.el-button--text {\r\n  color: #57cc8a;\r\n}\r\n\r\n.btn {\r\n  float: right;\r\n  background: #57cc8a;\r\n  letter-spacing: 1px;\r\n}\r\n\r\n.reply {\r\n  padding-left: 75px;\r\n  padding-top: 15px;\r\n}\r\n</style>"]}]}