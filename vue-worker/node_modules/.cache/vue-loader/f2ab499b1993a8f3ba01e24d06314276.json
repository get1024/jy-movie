{"remainingRequest":"E:\\project\\jy-movie-project\\jy-movie\\vue-worker\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project\\jy-movie-project\\jy-movie\\vue-worker\\src\\views\\Activity.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\project\\jy-movie-project\\jy-movie\\vue-worker\\src\\views\\Activity.vue","mtime":1711963143950},{"path":"E:\\project\\jy-movie-project\\jy-movie\\vue-worker\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711422159312},{"path":"E:\\project\\jy-movie-project\\jy-movie\\vue-worker\\node_modules\\vue-loader\\lib\\index.js","mtime":1711422161051}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBDcmVhdGVBY3Rpdml0eSwgRGVsZXRlQWN0aXZpdHlCeUlkLCBMaXN0QWxsQWN0aXZpdHkgfSBmcm9tICJAL2FwaS9hY3Rpdml0eSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCg0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBwaWNrZXJPcHRpb25zOiB7DQogICAgICAgIGRpc2FibGVkRGF0ZSh0aW1lKSB7DQogICAgICAgICAgcmV0dXJuIHRpbWUuZ2V0VGltZSgpID4gRGF0ZS5ub3coKTsNCiAgICAgICAgfSwNCiAgICAgICAgc2hvcnRjdXRzOiBbew0KICAgICAgICAgIHRleHQ6ICfku4rlpKknLA0KICAgICAgICAgIG9uQ2xpY2socGlja2VyKSB7DQogICAgICAgICAgICBwaWNrZXIuJGVtaXQoJ3BpY2snLCBuZXcgRGF0ZSgpKTsNCiAgICAgICAgICB9DQogICAgICAgIH0sIHsNCiAgICAgICAgICB0ZXh0OiAn5pio5aSpJywNCiAgICAgICAgICBvbkNsaWNrKHBpY2tlcikgew0KICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgLSAzNjAwICogMTAwMCAqIDI0KTsNCiAgICAgICAgICAgIHBpY2tlci4kZW1pdCgncGljaycsIGRhdGUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwgew0KICAgICAgICAgIHRleHQ6ICfkuIDlkajliY0nLA0KICAgICAgICAgIG9uQ2xpY2socGlja2VyKSB7DQogICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSAtIDM2MDAgKiAxMDAwICogMjQgKiA3KTsNCiAgICAgICAgICAgIHBpY2tlci4kZW1pdCgncGljaycsIGRhdGUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfV0NCiAgICAgIH0sDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLA0KICAgICAgZm9ybTogew0KICAgICAgICBjb250ZW50OiAnJywNCiAgICAgICAgc3RhcnRUaW1lOiAnJywNCiAgICAgICAgZW5kVGltZTogJycsDQogICAgICB9LA0KICAgIH0NCiAgfSwNCg0KICBtb3VudGVkKCkgew0KICAgIHRoaXMubG9hZExpc3QoKTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQoNCiAgICBsb2FkTGlzdCgpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICBMaXN0QWxsQWN0aXZpdHkoKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgIHRoaXMubGlzdCA9IHJlcy5kYXRhDQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgICAgfSwgNzAwKQ0KICAgICAgfSkNCiAgICB9LA0KDQogICAgc3VibWl0QWN0aXZpdHkoKSB7DQogICAgICBDcmVhdGVBY3Rpdml0eSh0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5L+d5a2Y5oiQ5YqfIScNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLmxvYWRMaXN0KCkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KDQogICAgaGFuZGxlRGVsZXRlKGluZGV4KSB7DQogICAgICBEZWxldGVBY3Rpdml0eUJ5SWQodGhpcy5saXN0W2luZGV4XS5pZCkudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLmxpc3Quc2xpY2UoaW5kZXgsIDEpDQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLmxvYWRMaXN0KCkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KDQogIH0sDQoNCn0NCg=="},{"version":3,"sources":["Activity.vue"],"names":[],"mappings":";AA2CA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Activity.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div style=\"padding: 40px\">\r\n    <el-button @click=\"dialogFormVisible = true\" plain>添加影院活动</el-button>\r\n    <el-table v-loading=\"loading\" :data=\"list\" style=\"width: 100%;margin-top: 20px\">\r\n      <el-table-column prop=\"startTime\" label=\"开始时间\" width=\"220\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"endTime\" label=\"结束时间\" width=\"220\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"content\" label=\"活动内容\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"number\" label=\"参加人数\">\r\n      </el-table-column>\r\n      <el-table-column width=\"150\" label=\"操作\">\r\n        <template slot-scope=\"props\">\r\n          <el-button @click=\"handleDelete(props.$index)\" size=\"small\" type=\"danger\" plain>删 除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog title=\"新增活动表单\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form :model=\"form\">\r\n        <el-form-item style=\"padding-right: 100px\" label=\"开始日期\" label-width=\"120px\">\r\n          <el-date-picker v-model=\"form.startTime\" type=\"date\" value-format=\"yyyy-MM-dd\" placeholder=\"开始日期\">\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item style=\"padding-right: 100px\" label=\"结束日期\" label-width=\"120px\">\r\n          <el-date-picker v-model=\"form.endTime\" type=\"date\" value-format=\"yyyy-MM-dd\" placeholder=\"结束日期\">\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item style=\"padding-right: 100px\" label=\"活动内容\" label-width=\"120px\">\r\n          <el-input :rows=\"8\" type=\"textarea\" v-model=\"form.content\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitActivity\">确 定 保 存</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { CreateActivity, DeleteActivityById, ListAllActivity } from \"@/api/activity\";\r\n\r\nexport default {\r\n\r\n  data() {\r\n    return {\r\n      pickerOptions: {\r\n        disabledDate(time) {\r\n          return time.getTime() > Date.now();\r\n        },\r\n        shortcuts: [{\r\n          text: '今天',\r\n          onClick(picker) {\r\n            picker.$emit('pick', new Date());\r\n          }\r\n        }, {\r\n          text: '昨天',\r\n          onClick(picker) {\r\n            const date = new Date();\r\n            date.setTime(date.getTime() - 3600 * 1000 * 24);\r\n            picker.$emit('pick', date);\r\n          }\r\n        }, {\r\n          text: '一周前',\r\n          onClick(picker) {\r\n            const date = new Date();\r\n            date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);\r\n            picker.$emit('pick', date);\r\n          }\r\n        }]\r\n      },\r\n      loading: false,\r\n      list: [],\r\n      dialogFormVisible: false,\r\n      form: {\r\n        content: '',\r\n        startTime: '',\r\n        endTime: '',\r\n      },\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.loadList();\r\n  },\r\n\r\n  methods: {\r\n\r\n    loadList() {\r\n      this.loading = true;\r\n      ListAllActivity().then(res => {\r\n        setTimeout(() => {\r\n          this.list = res.data\r\n          this.loading = false\r\n        }, 700)\r\n      })\r\n    },\r\n\r\n    submitActivity() {\r\n      CreateActivity(this.form).then(res => {\r\n        if (res.success) {\r\n          this.dialogFormVisible = false\r\n          this.$message({\r\n            type: 'success',\r\n            message: '保存成功!'\r\n          });\r\n          this.loadList()\r\n        }\r\n      })\r\n    },\r\n\r\n    handleDelete(index) {\r\n      DeleteActivityById(this.list[index].id).then(res => {\r\n        if (res.success) {\r\n          this.list.slice(index, 1)\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          });\r\n          this.loadList()\r\n        }\r\n      })\r\n    },\r\n\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped></style>"]}]}